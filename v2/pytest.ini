[pytest]
addopts = --import-mode=importlib --strict-markers --cov=src/dar_backup --cov-config=pyproject.toml --cov-report=term --cov-report=xml:doc/test-report/coverage.xml --no-cov-on-fail -m "not live_discord"
testpaths = tests
timeout = 1800
markers =
    unit: fast pure logic tests (no external tools)
    component: subprocess boundary tests with mocks or lightweight commands
    integration: end-to-end workflows that invoke external tools
    slow: long-running or heavier integration tests
    live_discord: runs tests that hit a real Discord webhook (requires DAR_BACKUP_DISCORD_WEBHOOK_URL)
